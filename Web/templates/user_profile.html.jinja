{% extends 'privileged_base.html.jinja' %}

{% block title %}
  <title>user profile of {{username}}</title>
{% endblock %}

{% block privileged_base_content %}
  <div class="panel panel-info">
    <div class="panel-heading">
      <h3 class="panel-title">{{username}} profile</h3>
    </div>
    <div class="panel-body">
      {% if profile %}
        <dl class="dl-horizontal">
          <dt>name</dt>          <dd>{{profile['name']}}</dd>
          <dt>occupation</dt>    <dd>{{profile['job']}}</dd>
          <dt>organization</dt>  <dd>{{profile['company']}}</dd>
          <dt>email</dt>         <dd>{{profile['email']}}</dd>
          <dt>phone</dt>         <dd>{{profile['phone']}}</dd>
          <dt>external_link</dt> <dd>{{profile['external_link']}}</dd>
          <dt>gender</dt>        <dd>{{profile['gender']}}</dd>
          <!-- TODO(gunpinyo): add photo and friend panel -->
        </dl>
      {% else %}
        <p>{{username}} has not created profile yet.</p>
      {% endif %}
    </div>
  </div>
  <div class="panel panel-default">
    <div class="panel-heading">
      <h3 class="panel-title">Organised events</h3>
    </div>
    <table class="table table-hover">
      <tr>
        <th>Event name</th>
        <th>Start time</th>
        <th>End time</th>
        <th>Join Event?</th>
      </tr>
      {% for event_record in organised_events %}
        <tr class="clickable-row" href="/event/profile/{{ event_record['event_id'] }}">
          <td><a href="/event/profile/{{ event_record['event_id'] }}">{{ event_record['name'] }}</a></td>
          <td>{{ event_record['start_time'] }}</td>
          <td>{{ event_record['end_time'] }}</td>
          <td>
            {% if event_record['can_join_event'] %}
              <form style="margin:0px" action="/event/join/{{event_record['event_id']}}" method="POST">
                <button type="submit" class="btn btn-default btn-sm">Join Event</button>
              </form>
            {% endif %}
          </td>
        </tr>
      {% endfor %}
    </table>
  </div>
  <div class="panel panel-default">
    <div class="panel-heading">
      <h3 class="panel-title">Spoken events</h3>
    </div>
    <table class="table table-hover">
      <tr>
        <th>Event name</th>
        <th>Start time</th>
        <th>End time</th>
        <th>Join Event?</th>
      </tr>
      {% for event_record in spoken_events %}
        <tr class="clickable-row" href="/event/profile/{{ event_record['event_id'] }}">
          <td><a href="/event/profile/{{ event_record['event_id'] }}">{{ event_record['name'] }}</a></td>
          <td>{{ event_record['start_time'] }}</td>
          <td>{{ event_record['end_time'] }}</td>
          <td>
            {% if event_record['can_join_event'] %}
              <form style="margin:0px" action="/event/join/{{event_record['event_id']}}" method="POST">
                <button type="submit" class="btn btn-default btn-sm">Join Event</button>
              </form>
            {% endif %}
          </td>
        </tr>
      {% endfor %}
    </table>
  </div>
  <div class="panel panel-default">
    <div class="panel-heading">
      <h3 class="panel-title">Attended events</h3>
    </div>
    <table class="table table-hover">
      <tr>
        <th>Event name</th>
        <th>Start time</th>
        <th>End time</th>
        <th>Join Event?</th>
      </tr>
      {% for event_record in events %}
        <tr class="clickable-row" href="/event/profile/{{ event_record['event_id'] }}">
          <td><a href="/event/profile/{{ event_record['event_id'] }}">{{ event_record['name'] }}</a></td>
          <td>{{ event_record['start_time'] }}</td>
          <td>{{ event_record['end_time'] }}</td>
          <td>
            {% if event_record['can_join_event'] %}
              <form style="margin:0px" action="/event/join/{{event_record['event_id']}}" method="POST">
                <button type="submit" class="btn btn-default btn-sm">Join Event</button>
              </form>
            {% endif %}
          </td>
        </tr>
      {% endfor %}
    </table>
  </div>
{% endblock %}